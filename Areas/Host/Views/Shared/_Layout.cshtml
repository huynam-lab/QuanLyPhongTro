<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewBag.Title - Quản lý phòng trọ</title>

    <!-- Bootstrap + Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="~/Areas/Host/Assets/ChuNhacss.css" rel="stylesheet" type="text/css" />
    <style>
        body {
            background-color: #f5f6fa;
            font-family: "Segoe UI", sans-serif;
        }

        .navbar {
            background-color: #0047b3;
            font-weight: 100;
        }

            .navbar .nav-link {
                color: #fff !important;
                margin: 0 6px;
                transition: 0.2s;
            }

                .navbar .nav-link:hover {
                    color: #ffeb3b !important;
                }

            .navbar .btn-dangtin {
                background-color: #ffb400;
                border: none;
                color: #000;
                font-weight: 500;
                border-radius: 20px;
                padding: 4px 10px;
            }

                .navbar .btn-dangtin:hover {
                    background-color: #ffca28;
                }

        /* ===== SIDEBAR ===== */
        .sidebar {
            width: 250px;
            background-color: #fff;
            position: fixed;
            top: 40px; /* trừ chiều cao navbar */
            bottom: 0;
            left: 0;
            border-right: 1px solid #e0e0e0;
            padding: 20px 10px;
        }

            .sidebar .profile {
                text-align: center;
                margin-bottom: 20px;
            }

                .sidebar .profile img {
                    width: 70px;
                    height: 70px;
                    border-radius: 50%;
                    margin-bottom: 8px;
                }

                .sidebar .profile small {
                    color: #666;
                }

            .sidebar .btn-naptien {
                background-color: #ffb400;
                border: none;
                padding: 4px 12px;
                font-weight: 600;
                border-radius: 6px;
                font-size: 14px;
            }

            .sidebar .nav-section {
                margin-top: 25px;
            }

                .sidebar .nav-section h6 {
                    font-size: 13px;
                    color: #999;
                    text-transform: uppercase;
                    padding-left: 10px;
                    margin-bottom: 8px;
                }

            .sidebar a {
                display: block;
                padding: 8px 16px;
                color: #333;
                text-decoration: none;
                border-radius: 6px;
                margin: 2px 0;
                font-size: 15px;
                transition: 0.2s;
            }

                .sidebar a:hover, .sidebar a.active {
                    background-color: #f0f0f5;
                    color: #0047b3;
                }

        /* ===== CONTENT ===== */
        .content {
            margin-left: 250px;
        }

        .card {
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
            border: none;
        }

        .form-control, .form-select {
            border-radius: 8px;
        }

        .navbar,
        .navbar * {
            z-index: 1055 !important;
        }

        .dropdown-menu {
            position: absolute !important;
            z-index: 2000 !important;
        }
    </style>

</head>
<body>
    @model QuanLyPhongTro.Areas.Admin.ChuNhaViewModels.ChuNha
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" style="height:40px;">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold " href="#" style="font-size:13px;">
                PHONGTRO<span style="color:#ff6b00;">123.COM</span>
                <div style="font-size:12px; font-weight:400;">Kênh thông tin phòng trọ số 1 Việt Nam</div>
            </a>

            <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#mainNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="mainNav">
                <ul class="navbar-nav me-auto" style="font-size: 13px; font-weight: 400;">
                    <li class="nav-item"><a class="nav-link" href="@Url.Action("Index", "User", new { area = "" })">Phòng trọ</a></li>
                    <li class="nav-item"><a class="nav-link" href="@Url.Action("CanHoMini", "User", new { area = "" })">Căn hộ mini</a></li>
                    <li class="nav-item"><a class="nav-link" href="@Url.Action("CanHoChungCu", "User", new { area = "" })">Chung cư</a></li>
                    <li class="nav-item"><a class="nav-link" href="@Url.Action("Blog", "User", new { area = "" })">Blog</a></li>
                    <li class="nav-item"><a class="nav-link" href="@Url.Action("BangGiaDichVu", "User", new { area = "" })">Bảng giá dịch vụ</a></li>
                </ul>

                <ul class="navbar-nav ms-auto align-items-center" style="font-size:13px; font-weight:400;">
                    <li class="nav-item me-3"><a href="#" class="nav-link"><i class="bi bi-heart"></i> Tin đã lưu</a></li>
                    <li class="nav-item me-3"><a href="@Url.Action("DSTinDang", "Admin", new { area = "Host" })" class="nav-link"><i class="bi bi-folder"></i> Quản lý</a></li>
                    @*<li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle d-flex align-items-center" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            @if (ViewBag.Avata != "")
                                {
                                <img src="~/Kho/Img/Avata/@ViewBag.Avata" alt="avatar" width="28" class="rounded-circle me-1" style="object-fit:cover; height:28px;" />
                                }
                            else
                                {
                                <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" width="28" class="rounded-circle me-1">
                                @ViewBag.Name
                                }
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="@Url.Action("QuanLyTaiKhoan", "Admin", new { area = "Admin" })">Tài khoản</a></li>
                            <li><a class="dropdown-item" href="#">Đăng xuất</a></li>
                        </ul>
                    </li>*@
                    <li class="nav-item ms-3">
                        <a href="@Url.Action("Index", "Admin", new { area = "Host" })" class="btn btn-dangtin"><i class="bi bi-pencil-square me-1"></i>Đăng tin</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    @{ 
        var userID = Session["UserID"];
        var userName = Session["UserName"] as string;
        var userSDT = Session["SDT"] as string; // Giả sử bạn lưu SDT vào Session
        var userAvatar = Session["Avatar"] as string;
        string avatarPath;
        if (string.IsNullOrEmpty(userAvatar))
        {
            // Nếu Session["Avatar"] null hoặc rỗng, dùng ảnh mặc định
            avatarPath = "~/Assets/Images/Avatar/avatar-mac-dinh.jpg";
        }
        else
        {
            // Nếu có, dùng đường dẫn ảnh tùy chỉnh
            avatarPath = "~/Assets/Images/Avatar/" + userAvatar;
        }
    }

    <div class="sidebar">
        <div class="profile">
            <img src="@Url.Content(avatarPath)" alt="avatar" style="object-fit:cover;" />

            <h6 class="mt-2 mb-1">@userName</h6>
            <small>Mã tài khoản: @Session["UserID"] </small><br>
        </div>

        <div class="nav-section">
            <h6>Quản lý tin</h6>
            <a href="@Url.Action("Index", "Admin", new { area = "Host" })">
                <i class="bi bi-pencil-square me-2"></i> Đăng tin mới
            </a>

            <a href="@Url.Action("DSTinDang", "Admin", new { area = "Host" })">
                <i class="bi bi-list-ul me-2"></i> Danh sách tin đăng
            </a>

            @*<a href="#"><i class="bi bi-clock-history me-2"></i>Lịch sử nạp tiền</a>
                <a href="#"><i class="bi bi-wallet2 me-2"></i>Lịch sử thanh toán</a>*@
            <a href="@Url.Action("BangGiaDichVu", "User", new { area = "" })"><i class="bi bi-tags me-2"></i>Bảng giá dịch vụ</a>
        </div>

        <div class="nav-section">
            <h6>Tài khoản</h6>
            <a href="@Url.Action("QuanlyTaiKhoan", "Admin", new { area = "Host" })">
                <i class="bi bi-person-circle me-2"></i> Quản lý tài khoản
            </a>
            <a href="#"><i class="bi bi-box-arrow-right me-2"></i>Đăng xuất</a>
        </div>

        <div class="text-center mt-4 small text-muted border-top pt-3">
            Hỗ trợ: <b>@ViewBag.AdminName - @ViewBag.AdminSDT</b>
        </div>
    </div>
    <div class="content">
        @RenderBody()
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("scripts", required: false)
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll('[data-bs-toggle="dropdown"]').forEach(el => {
                new bootstrap.Dropdown(el);
            });
        });
    </script>

</body>


</html>
